generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id        String         @id @unique @default(uuid())
  email     String         @unique
  password  String
  role      Role
  donor     Donation[]     @relation("donor")
  recipient Donation[]     @relation("recipient")
  sender    Message[]      @relation("sender")
  reciever  Message[]      @relation("reciever")
  member    Organization[]
}

model Donation {
  id                String        @id @unique @default(uuid())
  donor_id          String
  donor             User          @relation(name: "donor", fields: [donor_id], references: [id])
  recipient_id      String
  recipient         User          @relation(name: "recipient", fields: [recipient_id], references: [id])
  name              String        @unique
  pickup_coordinate String?
  pickup_status     PickupStatus?
}

model Message {
  id          String @id @unique @default(uuid())
  sender_id   String
  sender      User   @relation(name: "sender", fields: [sender_id], references: [id])
  reciever_id String
  reciever    User   @relation(name: "reciever", fields: [reciever_id], references: [id])
  content     String
}

model Organization {
  id        String  @id @unique @default(uuid())
  member_id String
  member    User    @relation(fields: [member_id], references: [id])
  name      String  @unique
  event     Event[]
}

model Event {
  id              String       @id @unique @default(uuid())
  organization_id String
  organization    Organization @relation(fields: [organization_id], references: [id])
  name            String       @unique
  date            DateTime     @default(now())
}

enum Role {
  ADMIN
  DONOR
  RECIPIENT
  VOLUNTEER
}

enum PickupStatus {
  CONFIRMED
  REJECTED
}
